<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
</head>

<body>
    <header>
        <div class="container p-3">
            <span>
                <i class="fa-solid fa-phone fa-lg"></i>
                123456789
            </span>
            <span class="ms-4">
                <i class="fa-regular fa-envelope fa-lg"></i>
                email@gmail.com
            </span>
        </div>
        <div class="bg-dark header-mid">
            <div class="container h-100">
                <div class="row h-100 align-content-center text-center">
                    <h2 class="col text-light">TOY WORLD
                    </h2>
                    <div class="col-6">
                        <div class="input-group">
                            <input type="text" class="form-control border border-secondary border-2"
                                placeholder="Search">
                            <button class="btn btn-danger">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col align-self-center">
                        <div class="user-menu">
                            <a class="text-decoration-none text-light" href="#">
                                <i class="fa-solid fa-circle-user fa-2xl"></i>
                            </a>
                            <div class="mt-1 user-dropdown-menu">
                                <a href="#">Register</a>
                                <a href="#">Login</a>
                            </div>
                        </div>
                        <a class="text-decoration-none text-light ms-5" href="#">
                            <i class="fa-solid fa-cart-shopping fa-2xl"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-light bg-opacity-25 header-bottom">
            <div class="container h-100">
                <div class="row h-100 align-content-center text-center">
                    <a class="col menu-item" href="index.html">HOME</a>
                    <a class="col menu-item" href="product.html">PRODUCT</a>
                    <a class="col menu-item" href="#">ABOUT US</a>
                    <a class="col menu-item" href="#">CONTACT US</a>
                    <a class="col menu-item" href="#">BLOG</a>
                </div>
            </div>
        </div>
        <div class="bg-success bg-opacity-75 p-2 text-center">
            Home / <span class="text-white fw-bold"> Shopping Cart</span>
        </div>
        <h1 class="text-center m-5">Shopping Cart</h1>
    </header>
    <main>
        <div class="container">
            <form action="">
                <table id="table" class="table border">
                    <thead class="table-dark">
                        <tr>
                            <th><strong>PRODUCT</strong></th>
                            <th><strong>QUANTITY</strong></th>
                            <th style="min-width: 100px;"><strong>PRICE</strong></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="position-relative">
                            <td class="d-flex align-items-center">
                                <img src="./assets/images/a1.jpg" alt="" class="cart-product-img">
                                <div class="ms-3">
                                    Product 1
                                    <br>
                                    $<span class="product-price">29.00</span>
                                </div>
                            </td>
                            <td class="align-middle">
                                <div class="bg-secondary bg-opacity-25 d-flex p-2 mh-100 text-center"
                                    style="width: 120px;">
                                    <i class="dec-btn fa-solid fa-minus"></i>
                                    <input class="cart-qty" type="number" value="1">
                                    <i class="inc-btn fa-solid fa-plus"></i>
                                </div>
                            </td>
                            <td class="align-middle">
                                $<span class="total-price">29</span>
                                <a href="#" class="position-absolute end-0 me-5 text-dark">
                                    <i class="fa-solid fa-xmark"></i>
                                </a>
                            </td>
                        </tr>
                        <tr class="position-relative">
                            <td class="d-flex align-items-center">
                                <img src="./assets/images/a1.jpg" alt="" class="cart-product-img">
                                <div class="ms-3">
                                    Product 1
                                    <br>
                                    $<span class="product-price">400.50</span>
                                </div>
                            </td>
                            <td class="align-middle">
                                <div class="bg-secondary bg-opacity-25 d-flex p-2 mh-100 text-center"
                                    style="width: 120px;">
                                    <i class="dec-btn fa-solid fa-minus"></i>
                                    <input class="cart-qty" type="number" value="1">
                                    <i class="inc-btn fa-solid fa-plus"></i>
                                </div>
                            </td>
                            <td class="align-middle">
                                $<span class="total-price">40</span>
                                <a href="#" class="position-absolute end-0 me-5 text-dark">
                                    <i class="fa-solid fa-xmark"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
            <div class="d-flex mb-5 mt-4">
                <div>
                    <button class="btn btn-outline-dark fw-bold text-center p-3">
                        Continue Shopping
                    </button>
                </div>
                <div>
                    <div class="border-bottom fw-bold text-center p-3 ms-5 border-danger">
                        <a href="#" class="text-decoration-none text-dark">
                        <i class="fa-solid fa-xmark me-2"></i>
                        Clear Shopping Cart</a></div>
                </div>
                <div class="border ms-auto w-25 shadow">
                    <div class="m-3">
                        <div class="justify-content-between d-flex align-items-center mb-3">
                            <div><strong>Total:</strong></div>
                            <div class="fs-3 fw-bold ">$<span class="total">69</span></div>
                        </div>
                        <button class="btn btn-dark w-100 p-2">Check Out</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-secondary bg-opacity-25 text-center">
        <div class="container pt-5">
            <h1>Get In Touch Us</h1>
            <div class="row m-4">
                <div class="col">
                    <a class="m-3 " href="#"><i class="fab fa-twitter fa-2xl"></i></a>
                    <a class="m-3 " href="#"><i class="fa-brands fa-facebook-square fa-2xl"></i></a>
                    <a class="m-3 " href="#"><i class="fab fa-instagram fa-2xl"></i></a>
                    <a class="m-3 " href="#"><i class="fab fa-youtube fa-2xl"></i></a>
                </div>
            </div>
            Enter your email below to be the first to know about new collections and product launches.
            <div class="mt-3">
                <input class="w-25 p-2" type="text" placeholder="Enter your email address">
                <br>
                <button class="btn btn-primary m-3">Subscribe</button>
            </div>
            <div class="row p-3 mt-4">
                <hr>
                <div class="col fw-bold text-start align-self-center">@Toy world 2022</div>
                <div class="col align-self-center">
                    <h2>TOY WORLD</h2>
                </div>
                <div class="col text-end align-self-center"><img src="./assets/images/icon-pay.png" alt="Pay"></div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>

    <script>
        var incrementButton = document.getElementsByClassName('inc-btn');
        var decrementButton = document.getElementsByClassName('dec-btn');

        for (var i = 0; i < incrementButton.length; i++) {
            var button = incrementButton[i];
            button.addEventListener('click', function (event) {
                var buttonClicked = event.target;
                var input = buttonClicked.parentElement.children[1];
                let val = buttonClicked.parentElement.parentElement.parentElement;
                let unitPrice = val.querySelector('.product-price').innerHTML;
                let subPrice = val.querySelector('.total-price');
                var inputValue = input.value;
                
                if (inputValue >= 10)
                {
                    inputValue = 10;
                    getSubPrice(subPrice,inputValue,unitPrice);
                    getTotalPrice()
                }
                else {
                    var newValue = parseInt(inputValue) + 1;
                    input.value = newValue;
                    getSubPrice(subPrice,input.value,unitPrice);
                    getTotalPrice()
                }
            })
        }

        for (var i = 0; i < decrementButton.length; i++) {
            var button = decrementButton[i];
            button.addEventListener('click', function (event) {
                var buttonClicked = event.target;
                var input = buttonClicked.parentElement.children[1];
                let val = buttonClicked.parentElement.parentElement.parentElement;
                let unitPrice = val.querySelector('.product-price').innerHTML;
                let subPrice = val.querySelector('.total-price');
                var inputValue = input.value;
               
                if (inputValue <= 1)
                {
                    inputValue = 1;
                    getSubPrice(subPrice,inputValue,unitPrice);
                    getTotalPrice();
                }
                    
                else {
                    var newValue = parseInt(inputValue) - 1;
                    input.value = newValue;
                    getSubPrice(subPrice,input.value,unitPrice);
                    getTotalPrice();
                }
            })
        }

        var inputs = document.getElementsByClassName('cart-qty');
        for ( let input of inputs) {
            input.oninput = (event) => {
                let val = input.parentElement.parentElement.parentElement;
                let unitPrice = val.querySelector('.product-price').innerHTML;
                let subPrice = val.querySelector('.total-price');

                valueInput = event.target.value;
                getSubPrice(subPrice,valueInput,unitPrice);

                if(parseInt(valueInput) >= 10) {
                   input.value = 10;
                   getSubPrice(subPrice,input.value,unitPrice);
                   getTotalPrice()

                }
                else if (parseInt(valueInput)<=1) {
                    input.value = 1;
                    getSubPrice(subPrice,input.value,unitPrice);
                    getTotalPrice()

                }
                else if(isNaN(parseInt(valueInput))) {
                    subPrice.innerHTML = "0";
                    getTotalPrice()
                }
            }
        }
        function getSubPrice (subPrice, input, unitPrice) {
            subPrice.innerHTML = (parseInt(input) * parseFloat(unitPrice)).toFixed(2);
        }
        function getTotalPrice () {
            var arr = [];
            let subPrices = document.querySelectorAll('.total-price');
            let totalPrice = document.querySelector('.total');
            for (let subPrice of subPrices) {
                 arr.push(parseFloat(subPrice.innerHTML))
            }
            let total = arr.reduce((acc, val) => {
                return acc + val;
            })
            totalPrice.innerHTML = total.toFixed(2); 
            arr = [];
        }
    </script>
</body>

</html>